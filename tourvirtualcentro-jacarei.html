<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="icon" href="favicon.ico" type="image/x-icon">

  <meta charset="UTF-8">
  <link rel="icon" href="favicon.ico" type="image/x-icon">  <title>Tour Virtual</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      height: 100%;
      width: 100%;
      overflow: hidden;
      background: black;
      cursor: pointer;
    }

    .slide-container {
      height: 100vh;
      width: 100vw;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .slide {
      position: absolute;
      height: 100%;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.5s ease;
    }

    .slide img {
      max-height: 100vh;
      max-width: 100vw;
      object-fit: contain;
      transition: transform 0.3s ease;
    }

    .slide.active {
      opacity: 1;
      z-index: 1;
    }

    .controls {
      position: absolute;
      top: 20px;
      right: 20px;
      display: flex;
      gap: 10px;
      z-index: 10;
    }

    .controls button {
      font-size: 20px;
      padding: 10px 15px;
      border: none;
      background: rgba(255,255,255,0.2);
      color: white;
      border-radius: 5px;
      cursor: pointer;
      backdrop-filter: blur(5px);
    }

    .controls button:hover {
      background: rgba(255,255,255,0.4);
    }
  </style>
</head>
<body>

  <div class="slide-container" id="slideshow">
    <div class="slide"><img src="img/Apto_solar_do_bairro_centro/pic01.jpg" alt="Slide 1"></div>
    <div class="slide"><img src="img/Apto_solar_do_bairro_centro/pic02.jpg" alt="Slide 1"></div>
    <div class="slide"><img src="img/Apto_solar_do_bairro_centro/pic03.jpg" alt="Slide 3"></div>
    <div class="slide"><img src="img/Apto_solar_do_bairro_centro/pic04.jpg" alt="Slide 4"></div>
    <div class="slide"><img src="img/Apto_solar_do_bairro_centro/pic05.jpg" alt="Slide 5"></div>
    <div class="slide"><img src="img/Apto_solar_do_bairro_centro/pic06.jpg" alt="Slide 6"></div>
    <div class="slide"><img src="img/Apto_solar_do_bairro_centro/pic07.jpg" alt="Slide 7"></div>
    <div class="slide"><img src="img/Apto_solar_do_bairro_centro/pic08.jpg" alt="Slide 8"></div>
    <div class="slide"><img src="img/Apto_solar_do_bairro_centro/pic09.jpg" alt="Slide 9"></div>
    <div class="slide"><img src="img/Apto_solar_do_bairro_centro/pic10.jpg" alt="Slide 10"></div>
    <div class="slide"><img src="img/Apto_solar_do_bairro_centro/pic11.jpg" alt="Slide 11"></div>
    <div class="slide"><img src="img/Apto_solar_do_bairro_centro/pic12.jpg" alt="Slide 12"></div>
    <div class="slide"><img src="img/Apto_solar_do_bairro_centro/pic13.jpg" alt="Slide 13"></div>
    
    <div class="controls">
      <button onclick="event.stopPropagation(); zoomOut()">−</button>
      <button onclick="event.stopPropagation(); zoomIn()">+</button>
    </div>
  </div>

<script>
  const slides = document.querySelectorAll('.slide');
  const container = document.getElementById('slideshow');
  let current = 0;
  let scale = 1;
  let offsetX = 0;
  let offsetY = 0;
  let startX = 0;
  let startY = 0;
  let isDragging = false;
  let lastTouchDist = null;

  function showSlide(index) {
    const img = getCurrentImg();
    img.style.transform = 'scale(1)';
    img.style.cursor = 'grab';
    img.style.transition = 'transform 0.3s ease';
    scale = 1;
    offsetX = 0;
    offsetY = 0;
    slides[current].classList.remove('active');
    current = (index + slides.length) % slides.length;
    slides[current].classList.add('active');
  }

  function zoomIn() {
    scale = Math.min(scale + 0.1, 5);
    updateTransform();
  }

  function zoomOut() {
    scale = Math.max(scale - 0.1, 1);
    if (scale === 1) {
      offsetX = 0;
      offsetY = 0;
    }
    updateTransform();
  }

  function updateTransform() {
    const img = getCurrentImg();
    img.style.transition = 'transform 0.1s linear';
    img.style.transform = `scale(${scale}) translate(${offsetX}px, ${offsetY}px)`;
    img.style.cursor = scale > 1 ? 'grab' : 'default';
  }

  function getCurrentImg() {
    return slides[current].querySelector('img');
  }

  // Zoom com roda do mouse
  slides.forEach(slide => {
    slide.addEventListener('wheel', e => {
      e.preventDefault();
      if (e.deltaY < 0) zoomIn();
      else zoomOut();
    });
  });

  // Impede clique em botões de ativar o próximo slide
  document.querySelectorAll('.controls button').forEach(btn => {
    btn.addEventListener('click', e => e.stopPropagation());
  });

  // Clique avança (apenas se não estiver arrastando com zoom)
  document.addEventListener('keydown', e => {
    if (e.key === 'ArrowRight') nextSlide();
    if (e.key === 'ArrowLeft') prevSlide();
  });

  function nextSlide() {
    showSlide(current + 1);
  }

  function prevSlide() {
    showSlide(current - 1);
  }

  
// ------ DRAG estilo mapa (mouse)
container.addEventListener('mousedown', e => {
  if (scale <= 1) return;
  isDragging = true;
  startX = e.clientX;
  startY = e.clientY;
  container.style.cursor = 'grabbing';
  // Evita seleção de texto durante o arraste
  e.preventDefault();
});

// Escuta o movimento no document para garantir que o arraste continue mesmo fora do container
document.addEventListener('mousemove', e => {
  if (!isDragging || scale <= 1) return;
  const dx = e.clientX - startX;
  const dy = e.clientY - startY;
  startX = e.clientX;
  startY = e.clientY;
  offsetX += dx / scale;
  offsetY += dy / scale;
  updateTransform();
});

function stopDragging() {
  if (!isDragging) return;
  isDragging = false;
  container.style.cursor = scale > 1 ? 'grab' : 'default';
}

// Captura o 'mouseup' mesmo se for fora do container
document.addEventListener('mouseup', stopDragging);
// Caso a janela perca foco (ex.: ALT+TAB) também interrompe o arraste
window.addEventListener('blur', stopDragging);


// ------ DRAG estilo mapa (touch) + pinch-to-zoom

  
// Clique com mouse
container.addEventListener('click', e => {
  if (scale > 1 || isDragging) return; // não troca se estiver em zoom
  if (e.target.closest('.controls')) return; // ignora clique em botões
  const x = e.pageX;
  if (x < window.innerWidth / 2) {
    prevSlide();
  } else {
    nextSlide();
  }
});

// Toque em celular
container.addEventListener('touchend', e => {
  if (scale > 1) return;
  if (e.changedTouches.length === 1) {
    const x = e.changedTouches[0].clientX;
    if (x < window.innerWidth / 2) {
      prevSlide();
    } else {
      nextSlide();
    }
  }
});

  // Inicializa
  showSlide(current);
</script>



</body>
</html>
